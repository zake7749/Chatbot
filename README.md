# Mianbot

![demo](https://raw.githubusercontent.com/zake7749/Chatbot/master/docs/demo.png)

ğŸ‰ News: æˆ‘å€‘æ¡ç”¨äº†é¡ä¼¼çš„è³‡æ–™æ¡é›†ç­–ç•¥è¨“ç·´äº†ä¸€å€‹ç¹é«”ä¸­æ–‡çš„å¤§å‹èªè¨€æ¨¡å‹ï¼Œæ¨¡å‹æ•ˆèƒ½èˆ‡ä½¿ç”¨æ–¹å¼å¯ä»¥åƒè€ƒ [Kyara](https://github.com/zake7749/Kyara)

Mianbot æ˜¯æ¡ç”¨æ¨£æ¿èˆ‡æª¢ç´¢å¼æ¨¡å‹æ­å»ºçš„èŠå¤©æ©Ÿå™¨äººï¼Œç›®å‰æœ‰å…©ç¨®ç”¢ç”Ÿå›è¦†çš„æ–¹å¼ã€‚

* å…¶ä¸€ï¼ˆå·¦åœ–ï¼‰æ˜¯ä»¥è©å‘é‡é€²è¡ŒçŸ­èªåˆ†é¡ï¼Œé‡å°åˆ†é¡çš„ç›®æ¨™æ¨¡çµ„å¯¦ç¾ç‰¹å¾µæŠ½å–èˆ‡è¨˜æ†¶å›è¦†åŠŸèƒ½ï¼Œä»¥é€²è¡Œå¤šè¼ªå°è©±ï¼ŒåŒ¹é…æ–¹å¼å¯åƒè€ƒ[Semantic Graph](https://github.com/zake7749/Semantic-Graph)ï¼ˆç›®å‰ä»åœ¨æ–½å·¥ä¸­ Î£Î£Î£ (ã€â—‹ Ï‰â—‹ )ï¼ï¼‰ã€‚
* å…¶äºŒï¼ˆå³åœ–ï¼‰é™¤äº†å¤©æ°£æ‡‰ç­”å¤–ï¼Œä¸»è¦æ˜¯ä»¥ PTT Gossiping ä½œç‚ºçŸ¥è­˜åº«ï¼Œé€éæ–‡æœ¬ç›¸ä¼¼åº¦çš„æ¯”å°å–å‡ºèˆ‡ä½¿ç”¨è€…è¼¸å…¥æœ€ç›¸ä¼¼çš„æ–‡ç« æ¨™é¡Œï¼Œå†å¾æ¨æ–‡é›†å…§æŒ‘é¸å‡ºæœ€ç‚ºå¯é çš„å›è¦†ï¼Œç¨‹å¼å…§å®¹åŠå¯¦é©—éç¨‹è«‹åƒè¦‹[PTT-Chat_Generator](https://github.com/zake7749/PTT-Chat-Generator)ã€‚

## åŒ¹é…ç¤ºä¾‹

æ›´å¤šçš„æ¨£ä¾‹å¯ä»¥åƒç…§ `example/output.txt`

è¼¸å…¥ï¼šæ˜å¤©æ—©ä¸Šå«æˆ‘èµ·åºŠã€‚

|ç›¸ä¼¼åº¦|æ¦‚å¿µ|åŒ¹é…å…ƒ|
|------|----|------|
|0.4521|é¬§é˜|èµ·åºŠ|
|0.3904|å¤©æ°£|æ—©ä¸Š|
|0.3067|ä½å®¿|èµ·åºŠ|
|0.1747|ç—…ç—‡|èµ·åºŠ|
|0.1580|è³¼è²·|æ—©ä¸Š|
|0.1270|è‚¡ç¥¨|æ—©ä¸Š|
|0.1096|è§€å…‰|æ—©ä¸Š|

è¼¸å…¥ï¼šæ˜å¤©ä¸Šæµ·æœƒä¸æœƒä¸‹é›¨ï¼Ÿ

|ç›¸ä¼¼åº¦|æ¦‚å¿µ|åŒ¹é…å…ƒ|
|------|----|------|
|0.5665|å¤©æ°£|ä¸‹é›¨|
|0.3918|é¬§é˜|ä¸‹é›¨|
|0.1807|ç—…ç—‡|ä¸‹é›¨|
|0.1362|ä½å®¿|ä¸‹é›¨|
|0.0000|è‚¡ç¥¨||
|0.0000|è§€å…‰||
|0.0000|è³¼è²·||

## ç’°å¢ƒéœ€æ±‚

* å®‰è£ python3 é–‹ç™¼ç’°å¢ƒ
* å®‰è£ [gensim â€“ Topic Modelling in Python](https://github.com/RaRe-Technologies/gensim)
* å®‰è£ [jieba ç»“å·´ä¸­æ–‡åˆ†è¯ ](https://github.com/fxsjy/jieba)
* æœ‰å·²è¨“ç·´å¥½çš„ä¸­æ–‡è©å‘é‡ï¼Œä¸¦æ ¹æ“šæª”æ¡ˆä½ç½®èª¿æ•´ `Console class` çš„åˆå§‹åŒ–åƒæ•¸ã€‚

```python
import Chatbot.console as console
c = console.Console(model_path='your_model')
```

* å¦‚è¦ä½¿ç”¨ QA æ¨¡çµ„ï¼Œè«‹å…ˆä¾ç…§[å•ç­”æ¸¬è©¦ç”¨è³‡æ–™é›†](https://github.com/zake7749/Chatbot#%E5%95%8F%E7%AD%94%E6%B8%AC%E8%A9%A6%E7%94%A8%E8%B3%87%E6%96%99%E9%9B%86)é€²è¡Œé…ç½®ï¼Œæˆ–é€éå°‡`chatbot.py` ä¸­çš„ `self.github_qa_unupdated` è¨­ç‚º `True` é¸æ“‡é—œé–‰ QA æ¨¡çµ„

## ä½¿ç”¨æ–¹å¼

### èŠå¤©æ©Ÿå™¨äºº

```python
import Chatbot.chatbot as chatbot

chatter = chatbot.Chatbot(w2v_model_path='your_model')
chatter.waiting_loop()
```

### è¨ˆç®—åŒ¹é…åº¦

```python
import Chatbot.console as console

c = console.Console(model_path='your_model')
speech = input('Input a sentence:')
res,path = c.rule_match(speech)
c.write_output(speech,res,path)
```

## è¦å‰‡æ ¼å¼

è¦å‰‡æ¡ç”¨ json æ ¼å¼ï¼Œæ¨£æ¿è¦å‰‡æ”¾ç½®æ–¼`\RuleMatcher\rule`ä¸­ï¼Œ

```json
    {
        "domain": "ä»£è¡¨é€™å€‹è¦å‰‡çš„æŠ½è±¡æ¦‚å¿µ",
        "response": [
		"å°æ‡‰åˆ°è©²è¦å‰‡å¾Œ",
        	"æ©Ÿå™¨äººæ‰€æœƒçµ¦äºˆçš„å›è¦†",
        	"æ©Ÿå™¨äººæœƒéš¨æ©ŸæŠ½å–ä¸€æ¢ response"
        ],
        "concepts": [
            "è©²è¦å‰‡çš„å¯èƒ½è¡¨ç¤ºæ–¹å¼"
        ],
        "children": ["è©²è¦å‰‡çš„å­è¦å‰‡","å¦‚è³¼è²· -> è³¼è²·é£²æ–™,è³¼è²·è¡£æœ......"]
    }
```

### Example

```json
    {
        "domain": "è³¼è²·",
        "response": [
        	"æ­£åœ¨å°‡æ‚¨å°å‘è³¼ç‰©æ¨¡çµ„"
        ],
        "concepts": [
            "è³¼è²·","è³¼ç‰©","è¨‚è³¼"
        ],
        "children": [
            "è³¼è²·ç”Ÿæ´»ç”¨å“",
            "è³¼è²·å®¶é›»",
            "è³¼è²·é£Ÿç‰©",
            "è³¼è²·é£²æ–™",
            "è³¼è²·é‹å­",
            "è³¼è²·è¡£æœ",
            "è³¼è²·é›»è…¦ç”¢å“"
        ]
    },
```
## å•ç­”æ¸¬è©¦ç”¨è³‡æ–™é›†

è«‹é»æ“Š[é€™è£¡](https://drive.google.com/file/d/11JlbmYmuu00TfmfdAfyoGK_E3VMp8Vd_/view)ä¸‹è¼‰éƒ¨åˆ†æ¸¬è©¦ç”¨è³‡æ–™é›†ï¼Œå…§å®¹åŒ…å«äº† PTT C_Chatã€Gossiping ç‰ˆéæ–°èé¡å•ç­”ç´„ 250,000 å‰‡ã€‚æª”æ¡ˆè§£å£“ç¸®å¾Œè«‹æ”¾ç½®æ–¼ `QuestionAnswering/data/` è³‡æ–™å¤¾ä¸‹ï¼Œ`reply.rar` è§£å£“ç¸®å¾Œçš„è³‡æ–™å¤¾è«‹æ”¾ç½®æ–¼ `QuestionAnswering/data/processed` ä¸‹ï¼š
```
QuestionAnswering
â””â”€â”€ data
   â”œâ”€â”€ SegTitles.txt
   â”œâ”€â”€ processed
   â”‚   â””â”€â”€ reply
   â”‚       â”œâ”€â”€ 0.json
   â”‚       â”œâ”€â”€ .
   â”‚       â”œâ”€â”€ .
   â”‚       â”œâ”€â”€ .
   â”‚       â””â”€â”€ xxx.json
   â””â”€â”€ Titles.txt
```
å®Œæˆé…ç½®å¾Œï¼Œå¯ä»¥å°‡`chatbot.py` ä¸­çš„ `self.github_qa_unupdated` è¨­ç‚º `False` æ‰“é–‹å•ç­”æ¨¡çµ„é€²è¡Œæ¸¬è©¦ã€‚

## é–‹ç™¼æ—¥èªŒ

* [ä»¥ gensim è¨“ç·´ä¸­æ–‡è©å‘é‡](http://zake7749.github.io/2016/08/28/word2vec-with-gensim/)
* [åŸºæ–¼è©å‘é‡çš„ä¸»é¡ŒåŒ¹é…](http://zake7749.github.io/2016/08/30/chatterbot-with-word2vec/)
* [èŠå¤©æ©Ÿå™¨äººçš„é–‹ç™¼æ€è·¯](http://zake7749.github.io/2016/12/17/how-to-develop-chatbot/)

## ç‰¹åˆ¥è‡´è¬

* ç¶²è·¯æ¢å‹˜æš¨è·¨èªçŸ¥è­˜ç³»çµ±å¯¦é©—å®¤
* æ™ºæ…§å‹çŸ¥è­˜ç®¡ç†å¯¦é©—å®¤
* Legoly
* çµ¦äºˆæˆ‘å”åŠ©èˆ‡äº¤æµçš„æ¯åæœ‹å‹
